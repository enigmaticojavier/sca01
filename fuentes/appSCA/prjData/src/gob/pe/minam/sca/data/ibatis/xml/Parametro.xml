<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Parametro">

  <typeAlias alias="Parametro" type="gob.pe.minam.sca.pojo.Parametro"/>
  
  <resultMap id="ParametroResult" class="Parametro">
    <result property="idParametro" column="IDPARAMETRO"/>
    <result property="codParametro" column="CODPARAMETRO"/>
    <result property="tipParametro" column="TIPPARAMETRO"/>
    <result property="txtParametro" column="TXTPARAMETRO"/>
    <result property="txtValor" column="TXTVALOR"/>
  </resultMap>
  
  <resultMap id="TipoParametroResult" class="Parametro">
    <result property="tipParametro" column="TIPPARAMETRO"/>
    <result property="txtParametro" column="TXTPARAMETRO"/>
  </resultMap>

  <select id="selectAllParametro" resultMap="ParametroResult">
    select * from PARAMETROS
  </select>

  <select id="getParametroByKey" parameterClass="int" resultClass="Parametro">
    select * from PARAMETRO
    where IDPARAMETRO = #idParametro#
  </select>
   
  <insert id="insertParametro" parameterClass="Parametro">
    insert into PARAMETRO(
      IDPARAMETRO,
      CODPARAMETRO,
      TIPPARAMETRO,
      TXTPARAMETRO,
      TXTVALOR
    )values(
        parametroid_sequence.NEXTVAL,
        #codParametro#,
        #tipParametro#,
        #txtParametro#,
        #txtValor#
    )
  </insert>
  
  <update id="updateParametro" parameterClass="Parametro">
    update PARAMETRO
    set CODPARAMETRO=#codParametro#,
        TIPPARAMETRO=#tipParametro#,
        TXTPARAMETRO=#txtParametro#,
        TXTVALOR=#txtValor#
    where IDPARAMETRO = #idParametro#
  </update>
  
   <delete id="deleteParametro" parameterClass="int">
    delete from PARAMETRO
    where IDPARAMETRO = #idParametro#
  </delete>
  
  <select id="selectTipoParametro" parameterClass="int" resultMap="TipoParametroResult">
    select distinct tipparametro, txtparametro 
    from parametro
    order by txtparametro 
  </select>
  
  <select id="findParametroXTipoParametro" parameterClass="string" resultMap="ParametroResult">
    select * 
    from parametro
    where tipparametro=#tipParametro#
  </select>
  
  <select id="findParametroXParametro" parameterClass="Parametro" resultMap="ParametroResult">
    select ins.* 
    from parametro tac, parametro ins
    where tac.tipparametro=#tipParametro# and 
    ins.tipparametro =tac.codparametro and ins.codparametro=#codParametro#
  </select>
  
  

</sqlMap>