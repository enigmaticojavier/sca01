<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Proyecto">

  <typeAlias alias="Proyecto" type="gob.pe.minam.sca.pojo.Proyecto"/>

  <resultMap id="ProyectoResult" class="Proyecto">
    <result property="pryId" column="PRYID"/>
    <result property="ubigeoId" column="UBIGEOID"/>
    <result property="personaId" column="PERSONAID"/>
    <result property="txtCoordenadas" column="TXTCOORDENADAS"/>
    <result property="clsTipificacion" column="CLSTIPIFICACION"/>
    <result property="txtDescripcion" column="TXTDESCRIPCION"/>
    <result property="mnInversion" column="MNINVERSION"/>
    <result property="clsSector" column="CLSSECTOR"/>
    <result property="clsSubSector" column="CLSSUBSECTOR"/>
    <result property="fchExpediente" column="FCHEXPEDIENTE"/>
  </resultMap>

  <!-- Select with no parameters using the result map for Account class. -->
  <select id="selectAllProyectos" resultMap="ProyectoResult">
    select * from PROYECTO
  </select>

  <!-- A simpler select example without the result map.  Note the 
       aliases to match the properties of the target result class. -->
  <select id="selectProyectoById" parameterClass="int" resultClass="Proyecto">
    select * from PROYECTO
    where PRYID = #pryId#
  </select>
   
  <insert id="insertProyecto" parameterClass="Proyecto">
    insert into PROYECTO (
	 PRYID,
	 UBIGEOID,
	 PERSONAID,
	 TXTCOORDENADAS,
	 CLSTIPIFICACION,
	 TXTDESCRIPCION,
	 MNINVERSION,
	 CLSSECTOR,
	 CLSSUBSECTOR,
	 FCHEXPEDIENTE
  	)values (
     #pryId#,
     #ubigeoId#,
     #personaId#,
     #txtCoordenadas#,
     #clsTipificacion#,
     #txtDescripcion#,
     #mnInversion#,
     #clsSector#,
     #clsSubSector#,
     #fchExpediente#
    )
  </insert>
  
  <parameterMap id="parametersBuscarProyecto" class="map" >
    <parameter property="p_rsProyecto" jdbcType="ORACLECURSOR" javaType="java.sql.ResultSet" mode="OUT"/>
    <parameter property="p_cDescripcion" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
    <parameter property="p_cUbigeoId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
    <parameter property="p_cClsTipificacion" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
    <parameter property="p_dFchExpedienteDesde" jdbcType="DATE" javaType="java.util.Date" mode="IN"/>
    <parameter property="p_dFchExpedienteHasta" jdbcType="DATE" javaType="java.util.Date" mode="IN"/>
    <parameter property="p_cEstadoTramite" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
    <parameter property="p_cClsSector" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
    <parameter property="p_cClsSubSector" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
  </parameterMap>
  <procedure id="PQ_PROYECTO.BUSCAR" parameterMap="parametersBuscarProyecto">
     { call PQ_PROYECTO.BUSCAR(?,?,?,?,?,?,?,?,?) }
  </procedure>
    

</sqlMap>